<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>



    <button id="piedra">PIEDRA</button><button id="papel">PAPEL</button><button id="tijera">TIJERA</button>
    <button id="jugar">Jugar</button><button id="reiniciar">reiniciar</button>
   <div id="mensajeFinal"><strong></strong></div>
<div id="scoreFinal"><em></em></div>
    <script>

      let ronda;
        let buttonIniciar = document.querySelector('button#jugar');
        let buttonReiniciar = document.querySelector('button#reiniciar');
        let buttonRock = document.querySelector('button#piedra');
         let buttonPaper = document.querySelector('button#papel');
        let buttonScissor = document.querySelector('button#tijera');
        let allButton = document.querySelectorAll('button');
      let mensajeFinal = document.querySelector('#mensajeFinal strong');
        let scoreFinal = document.querySelector('#scoreFinal em');




      

       
        let rondasJugadas = 0;
        let humanScore = 0;
        let computerScore = 0;

         allButton.forEach(button=>{
            if(button.id==="jugar"){
                button.disabled=false;
            }else{
                button.disabled=true;

            }
            
        });
     

        buttonIniciar.addEventListener('click',()=>{
             do{ 
            
          ronda = parseInt(prompt('Cuantas rondas quieres jugar?'));
        
      } while(isNaN(ronda) || ronda<=0);//dowhile lanzara el prompt repetidas veces mientras que el input aportado por el usuario no sea un número o sea un número menor o igual a 0      
     
         allButton.forEach(button=>{
            if(button.id==="jugar"){
                button.disabled=true;
            }else{
                button.disabled=false;

            }
            
        });


        });

     buttonReiniciar.addEventListener('click',()=>{
        allButton.forEach(button=>button.disabled=false);
                                
                                

                                mensajeFinal.textContent="";
                                scoreFinal.textContent="";
                                rondasJugadas = 0;
                                humanScore = 0;
                                  computerScore = 0;
                                    allButton.forEach(button=>{
            if(button.id==="jugar"){
                button.disabled=false;
            }else{
                button.disabled=true;

            }
            
        });

                                  
     })
   
      
         buttonRock.addEventListener('click',()=>{
        
            let eleccionHumana = 0;
           funcionalidadBoton(eleccionHumana);
       
            
        })
         buttonPaper.addEventListener('click',()=>{
          
            let eleccionHumana = 1;
            funcionalidadBoton(eleccionHumana);
           

           
        })
        buttonScissor.addEventListener('click',()=>{
         
            let eleccionHumana = 2;
           funcionalidadBoton(eleccionHumana);
       
             
           
        })

     

       
       const getComputerChoice = ()=>{
        let numero = Math.floor(Math.random() * 3);
        return numero;
       
       }

      const funcionalidadBoton=(eleccionHumana)=>{
         rondasJugadas++;
             let eleccionPc = getComputerChoice();
            playRound(eleccionHumana,eleccionPc);
              if(rondasJugadas===ronda){
                  finalScore();
               allButton.forEach(button=>{
                if(button.id==="reiniciar"){
                    buttonReiniciar.disabled = false;
                }else{
                    button.disabled=true;
                }
               });
       }
       
      }

       const playRound = (eleccionHumana,eleccionPc)=>{
      
        if(eleccionHumana== 0 && eleccionPc == 0){
             mensajeFinal.textContent ='piedra vs piedra = empate';

        }else if(eleccionHumana == 0 && eleccionPc == 1){
            mensajeFinal.textContent ='piedra vs papel = pierdes';
            computerScore++;
        }else if(eleccionHumana == 0 && eleccionPc ==2){
            console.log('piedra vs tijera = ganas');
            humanScore++;
        }else if(eleccionHumana == 1 && eleccionPc == 1){
             mensajeFinal.textContent ='papel vs papel = empate';

        }else if(eleccionHumana== 1 && eleccionPc == 0){
            mensajeFinal.textContent ='papel vs piedra = ganas';
            humanScore++;
        }else if(eleccionHumana == 1 && eleccionPc ==2){
             mensajeFinal.textContent ='papel vs tijera = pierdes';
            computerScore++;
        }else if(eleccionHumana == 2 && eleccionPc == 1){
             mensajeFinal.textContent ='tijera vs papel = ganas';
            humanScore++;

        }else if(eleccionHumana == 2 && eleccionPc == 0){
             mensajeFinal.textContent ='tijera vs piedra = pierdes' ;
            computerScore++;
        }else if(eleccionHumana == 2 && eleccionPc ==2){
            mensajeFinal.textContent ='tijera vs tijera = empate';
            
        }
       
       }


       function  finalScore(){

              
         if(humanScore>computerScore){
                 mensajeFinal.textContent='Felicidades has ganado';
                      }else if(humanScore==computerScore){
                     mensajeFinal.textContent='Has empatado, suerte la próxima';
                        }else{
                             mensajeFinal.textContent= 'Has perdido, suerte la próxima';
                                }
                                scoreFinal.textContent = `humano:${humanScore}-${computerScore}:ordenador`;
                             
       }
    
       
    </script>
</body>
</html>